<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ToDo List</title>
    <link rel="stylesheet" href="css/styles.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous" />
</head>

<body class="text-light">
    <div class="the-list">
        <div class="box">
            <div>
                <h1>Todo List</h1>
            </div>
            <div class="filter">
                <div class="filter-text">Filter your list by priority:</div>
                <div class="filter-options">
                    <form action="/" method="GET">
                        <button type="submit" class="priority all">ALL</button>
                    </form>
                    <form action="/high" method="GET">
                        <button type="submit" class="priority">H</button>
                    </form>
                    <form action="/mid" method="GET">
                        <button type="submit" class="priority">M</button>
                    </form>
                    <form action="/low" method="GET">
                        <button type="submit" class="priority">L</button>
                    </form>
                </div>
            </div>
        </div>

        <div class="box">
    <% for(var i=0; i< ejes.length; i++) { %>
    <div class="task-box" style="margin-bottom: 16px;">
        <form action="/edit" method="POST" class="d-flex align-items-center gap-2" style="width:100%;">
            <input type="hidden" name="index" value="<%= i %>">
            <% if (typeof listType !== "undefined") { %>
                <input type="hidden" name="listType" value="<%= listType %>">
            <% } %>
            <input type="checkbox" id="done<%= i %>" class="done-checkbox" style="margin-right:8px;" />
            <input type="text" name="newValue" value="<%= ejes[i] %>" required class="edit-text" style="flex:1; min-width:0; padding:6px 10px; border-radius:4px; border:1px solid #ccc; margin-right:8px;">
            <button type="submit" class="edit-btn green" style="margin-right:8px;">Edit</button>
        </form>
        <form action="/delete" method="POST" style="display:inline;">
            <input type="hidden" name="index" value="<%= i %>">
            <% if (typeof listType !== "undefined") { %>
                <input type="hidden" name="listType" value="<%= listType %>">
            <% } %>
            <button type="submit" class="edit-btn del red">Del</button>
        </form>
    </div>
    <% } %>
</div>


        <div class="box form-box">
            <form action="/" method="POST" class="form">
                <div class="mb-3">
                    <label for="task" class="form-label">Enter your task</label>
                    <input type="text" class="form-control" id="task" name="ele1" />
                </div>
                <button type="submit" id="add-btn" class="btn btn-primary add" name="priority" value="none">Add it</button>
                <button type="submit" id="high-btn" class="btn btn-primary priority red" name="priority" value="high">
                    <div class="high priority-text">H</div>
                </button>
                <button type="submit" id="mid-btn" class="btn btn-primary priority yellow" name="priority" value="medium">
                    <div class="medium priority-text">M</div>
                </button>
                <button type="submit" id="low-btn" class="btn btn-primary priority green" name="priority" value="low">
                    <div class="low priority-text">L</div>
                </button>
            </form>
        </div>
    </div>

    <footer class="bg-dark footer">
        ðŸ“Œ Small steps every day lead to big results ðŸ¥³.
    </footer>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).on('click', '.done-checkbox', function () {
            let idNum = this.id.replace("done", "");
            $("#para" + idNum).toggleClass("done");

            if ($("#para" + idNum).hasClass("done")) {
                alert("Task Completed!");
            } else {
                alert("Task marked as not done :(");
            }
        });

        $("#add-btn").click(function (event) {
            if ($("#task").val().trim() === "") {
                event.preventDefault();
                alert("Please enter a task before adding it to the list.");
            }
        });
        $("#high-btn").click(function (event) {
            if ($("#task").val().trim() === "") {
                event.preventDefault();
                alert("Please enter a task before adding it to the list.");
            }
        });$("#low-btn").click(function (event) {
            if ($("#task").val().trim() === "") {
                event.preventDefault();
                alert("Please enter a task before adding it to the list.");
            }
        });$("#mid-btn").click(function (event) {
            if ($("#task").val().trim() === "") {
                event.preventDefault();
                alert("Please enter a task before adding it to the list.");
            }
        });
    </script>
</body>

</html>